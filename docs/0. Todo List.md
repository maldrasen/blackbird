Just as good as project management!

---
# Current Task

### Training Systems
I now need to get the training system in a workable state. That's the primary focus of the game, so I want to make that work before including anything else like day to day exploration, events, combat, anything that's not directly related to training, stubbing things out as needed. I've got the consent calculations in a decent state. Working on the sensation calculations now.
##### Next Steps
- Disable actions that might become possible, but are currently unavailable. This would be actions that require a certain arousal threshold (i.e. cock must be erect) though there might be other requirements as well. Can't do this until we implement all the insertion size math.
- When an action is clicked, be build a command, send it to the state machine to be picked up by the training system, which then does the sensation calculations.

### Persisted Actions
I'm going to need to figure out how these persisted actions work. The SexActions will need to be adjusted as some actions are only ever follow on actions, but some could be both. Like the get-blowjob action adds a 'getting blowjob' state. This state can have follow on actions like get-deepthroat, fuck-face, piss-in-mouth, that changes that state. All of these actions can be done without getting the blowjob first though. So they should be in the actions list, but moved into the persisted action when we're in that state, and hidden in the main list. Other actions like piss-in-throat though are only possible when the persisted state becomes 'getting deepthroated' We should probably then mark that action as a special action, only available within the current state. Actions like fuck-ass and fuck-pussy are also a little unusual. If an orifice hasn't yet been fucked, we should only show an 'insert' action. Once the orifice has been opened up and ready though you can start fucking it for real at any point, in case we have actions that go from ass to mouth, then back to ass, we don't need to handle the insertion action once again. Going back to ass fucking should resume whatever thrusting state we were in.

### Sex Positions
The positions are something else that I'm going to need to figure out soon. The idea is that the positions work with the persisted actions, where if you pick an action that necessitates a position change, the persisted actions that don't work in the new position will need to be removed. For instance, if you're fucking in the doggy style position, and choose blowjob as your next action, that stops the fucking persisted action, repositions the characters to that the blowjob can happen, and persists the blowjob state. I don't think we pick what position we go into, just whatever makes the most sense. In this case we would go from doggie to something like "player kneeling in front of partner on all fours" though we'd need a better name for that. The complexity of this system is figuring out a way to model the 'connectivity' of the parts in each position. Can "mouth reach cock" here? And also we need to figure out how positions flow into each other. We might need some kind of a sex position graph where we map what position can change into which. The nodes would be the positions, and the edges the moves needed to reach those positions. Doggy to missionary would just be 'partner turns over'. Doggy to reverse cowgirl would be 'pulled on top of' This graph doesn't need to be complex, and each position could actually have it's own list of positions that you can get to from here. There no good way to get from doggy to "player kneeling in front of partner" so that would require a complete rearrangement. When we rearrange we remove all persisted actions, and we don't provide a position transition. (The transitions are really only important for the action text, we want to describe how the characters move when changing positions) With this model, every action would point to every other action it can reach, but that would be just as complicated as a graph data structure that includes every position. 

Something like:
```
code:'doggy',
reachablePositions:[
  { code:'missionary', transition:'partner-turns-over' },
  { code:'all-fours-sucking', transition:'partner-turns-around' },
  { code:'sixty-nine', transition:'player-slides-under' },
  { code:'reverse-cowgirl', transition:'partner-is-pulled-on-top' },
  ...
]
```
From the doggy position we can't get to regular cowgirl without a complex repositioning that removes all persisted actions, though you could go doggy -> reverse-cowgirl -> cowgirl in two steps.

In this case, perhaps we add a general 'reposition' action that shows only the positions reachable from the current position, showing what persisted actions would be removed. Which we know by looking at the difference between the connectivity maps between the two positions.

# Primary Tasks

### Attitudes
When building a character's dialog it would be most useful to have some kind of general attitude value. The attitude should be based off of the feelings, current marks, control, and perhaps personality. Basically, doing the heavy lifting of figuring out where in that multidimensional space their current attitude lies, and flattening it into a single value we can switch off of. For example:
- Resistant (low control, no fear or respect)
- Curious (low affection, low or no respect, no fear)
- Cautious (no affection, low respect, moderate fear)
I think I may work on some of the events and dialog first, to see what kind of attitudes that it makes sense for a character to take.

### Orders
When interacting with a character we can give them simple orders. Orders will need to go though the same consent calculations to see if they agree to follow the order. And we'll also need to get the attitude to see what the character's response should be. 

Orders could be fairly simple, such as 'follow me' which would have the character follow you when you move locations, 'stop following' or 'stay here' to place them in the current location. If they're told to stay someplace, they might just immediately leave if their control is too low, or wait for like 15 minutes, or an hour, or they'll wait there until they starve to death if their control is up in the obsessive range.

Other orders will be more complex, and need more of a response from the character or start an event. Some would bring up a new UI, such as orders for changing a characters clothes or equipment. Changing clothes will be a whole thing... There needs to be a UI component like any role playing game, but each time a piece of clothing is changed there could be an event as the person is logically changing clothes in front of you, or could be asked to equip magical nipple clamps or something.

Characters can obey or refuse orders. Either way I should add a memory record for the order. That way I can also have a punish or reward option, that will look at the last order. If they've refused the last order I can punish them for it, and say why they're being either punished or rewarded. 

Orders are essentially like mini training opportunities. They use the same consent models and can adjust anima, preferences, feelings, etc. But really only for a single action. Ordering a character to give you a quick blowjob, should also obviously be a thing.

### Described Component
I'm going to need to add a component to hold all of the different descriptions. A character can have multiple descriptions, a description for each body part, a description for each item of clothing, an actor description, a body description, etc. Descriptions have a parent ID, an optional type (in case a single component needs something like a long and short form description), and the text. We'll save the text in the weaver template format, so it can be updated when needed.

### Equipment
I'll also need to start working on clothing and equipment and such, both for the training and the dungeon parts of the game. Everyone's completely naked at the moment.

### Dungeon Builder
Just to have something I can work on in public. I'm building rooms and simple one room features. Current goal here is to populate a dungeon level with features up to a target density. Add smaller corridors to make sure that everything is reachable. Then add doors to make sure that every part of the dungeon can be reached.

---
# Secondary Tasks

### Update Consent Calculations
The consent calculations are only about half finished, in a state where it's good enough to move onto other tasks in the training system. I'll need to go back and implement the rest of this.
- Apply personality factors, once they've been reworked.
- Need to also read current scale values, as the current anima and animus values should effect consent.
- A few aspects (like erogenousThroat) might effect consent.
- Health and stamina? Being injured should reduce consent in general. What about stamina?
- Body part fit will also need to be taken into account. We'll need a general, will part fit into part class. Will it fit? Will it hurt? (Do you want it to hurt?) Will it be satisfying? Not big enough? Clearly a more complicated factor.
- Marks. The hate marks and lust marks should definitely effect consent.

### Arousal Adjustments for Min and Max Orifice Width
High arousal levels should increase resting max width, maybe by 30% or so. This would need to read the arousal from the arousal component and the width from the orifice, to calculate the working max width. Arousal should also increase min width size, replicating an opening aroused pussy.

### More Species
We could use a more oral focused species, in the same way that lupins have sensitive urethras and halflings have sensitive cervixes. The naga come to mind, as swallowing seem pretty central to the whole snake thing, but dealing with a legless species has all kinds of complications. Maybe some leggy snakes are needed then. Good to have another scaly at the very least. 

### Character Portraits
Character portraits are important to have, but something that can wait for a while. We need to finally actually use Electron for something, sending an IPC command to open a file dialog and copy the selected file into the user data directory. If we're copying the portrait, we might as well have an application wide portrait library so that portraits can be reused. We should also include some default portraits in the application assets. When uploading a new portrait (or from the portrait library) we should be able to zoom and crop the selected portrait into the correct aspect ratio. This would be a simple set size and position within a correctly sized frame, rather than an actual crop or file resize. We could also allow portraits to be labeled, deleted, and such from the library as well.

### Dances
When adding the striptease action, I started to think about other related sex actions. Once a player is nude they could perform a sensual dance as an action. There could be other dances as well, degrading, or self abusive dances. These dances should need to be learned somehow, and perhaps there should be a dancing skill. And if I'm adding all these mechanics then dancing should be an combat skill as well. Dances to arouse the opponents, or attract their attacks, or enthrall them. Assistants should have a dance task that aids the arousal buildup. During training we probably want to make dances all follow on actions of a single sensual dance action, and the dance can change to another type of dance. The 'dancing in front of' position is very limiting, and most player actions would stop the partner from dancing. There might be a few I could see working, like a slap ass or tits while dancing, a whip while dancing action, maybe a jack off while watching action (that would be available for all performance actions now that I think about it.)

### Drugs
Drugs or alcohol can be used as mood enhancers. Drugging a person against their will would of course produce anger, but you could be sneaky about it, if we had some kind of slight of hand skill. A strong enough drug and they won't even remember. A drugged character doesn't receive as much anima or animus, the amount reduced should depend on drug strength.

We're going to have a variety of drugs with different methods for giving them to the partner. They could be drunk, injected, inserted like a suppository, maybe even smoked or snorted. The way a drug is taken effects the consent values for the action, and also the effect in some cases. A sensitivity drug might be localized to only work on the part where it is inserted or injected.

This drug action though is very complex. I think I need to have a single 'use drug' action that starts an event. In the event you select which drug from your inventory, and where and how you want to administer it. The final choice in this event should use the same consent results, which would mean that the consent result model needs to also calculate consent for arbritrary event actions as well. That shouldn't be too involved, just using the same consent factors and target value.

Drugged should be a priority status effect that appears early in the sex action text tree, as the drugged version of a personality might be wholly different from their normal personality. Although some drugs, that only effect sensitivity, won't change personality at all.

### Lactation
We set the breast's lactationFactor to 0 when we create a character. The `milky` trigger can then set lactation to a value between 90 and 100. We don't have any other systems that actually use this property though.

### Sex Fluids
We should keep track of the fluids (cum, piss, milk, vomit) produced by each actor during training, keeping track of how much fluid goes into each orifice separately. It should be possible for a character to be impregnated during a training scene. It's possible that if the player and an assistant both came in the partner's womb we won't know who got that character pregnant. Need systems for all fluid volumes, how much a character cums, how much urine is in their bladder, etc. Cum base volume should be determined mostly by species, though testicle size has a small impact. (I know it doesn't make sense biologically) 

### Sanity System
Some training actions will damage a character's sanity. We should have a system that slowly increases sanity. Maybe by default this could be a single point a day, but a comfortable environment will raise that. Conversely, a particularly bad environment (enforced bondage rules) would drop sanity every day. If sanity drops to 0 overnight, we could enqueue a mindbreak event where the player finds the character in a broken state.

---
# Long Term Plans

### Tails and Horns
I'm going to build the body with tails and horns as simple string types at first. I think this will work in most cases. It's usually enough to simply state that a character has a dog tail for instance. Eventually I'll want to include things like tail cocks, which will need a more complex tail component that has a child cock component. The same could be said for some kind of unicorn horn type cock. Dicks everywhere! We can do this by setting the type to `_component`, then we would know that the details can be found in a Tail or Horn component. Not just dicks, but something like horn length or color might be important.

### Body piercings
The various body components either have associated components or have the body piercing data on the component itself. It kind of makes sense to just have piercing information as properties of the component. The breast component could have a simple piercingType property. However, depending on how deep I want to go here, a piercing component could be a child of another component. The breasts could have several piercings at once, nipple bars and areola rings at the same time. Each piercing could have a material. They could even carry enchantments so they would also count as equipment. And if that's the case then we'd need to see about equipping and unequipping various body piercings as a type of jewelry. Definitely more of a long term goal.

### Sexual History
One thing that's often tracked in Era games is who a character lost their various virginities to, first kisses, first anal fisting, all that. That's never really interested me, but something that some players might care about. It's easy enough to keep track of virginity status for already virgin characters. For players who start with some experience though there's no way to really construct a whole sexual history that's connected to other characters. I could just specify that it's someone you don't personally know. That might be the cleanest implementation. I should differentiate between someone you don't know and someone who the character themselves don't know, which has a different implication. I could also spell out their relationship. Was it their boyfriend, their boss, their father?

### Sexual Fantasies
Characters should have secret sexual fantasies that give a large feelings bonus or adjusts sexual preferences when it's fulfilled. A fantasy should be something rather involved, and could involve several persisted actions at once, or multiple people. Something like 'tied down while being pissed on', or 'double anal penetration', or 'raped by monsters in the dungeon.' The easiest way to do this would be to just have a list of possible fantasies. Every time a sex action happens we check all the fantasies to see if its conditions are met. If so we need to add it to their memory then. And we fulfill that fantasy if it's one the character has. We could give characters this list at creation, or add them over time. If they've fulfilled their final fantasy they should be given a new one. It will have to be something that hasn't happened to them yet, so we'll need to check their memory for possible fantasies that have already happened. A character's fantasies can run contrary to their sexual preferences. When generating a androphobic male, it's possible they would be given a 'suck a man's cock' fantasy, but for an androphilic man that wouldn't be 'strange' enough to qualify as a fantasy. Likewise, only people without a piss-slut sexual preference would have a fantasy involving piss. Probably a few exceptions to this though. Someone who's into cervix play or fisting could still have a 'fist my cervix' fantasy, because that's such an unusual act.

### All the way though
We've added a throat depth for the deepthroating activities, and can detect when stomach penetration happens. We could also add a gut length for an "all the way through" action. Perhaps there's an intestinal straightening magic that exists to make that possible? We should also add the case when a character has a massive volume of cum, and they cum during anal sex or deepthroating, then we should trigger cum vomiting or an anal cum explosion.

### Future Sex Actions / Features / Body Part Types
- Pregnancy / Unusual Pregnancy (Anal, Breasts, Testicles) / Erotic Abortions
- Fuckable Nipples / Nipple cunts
- Dick Nipples
- Penis tongue
- Tongue/s growing inside of anus.
- Fuckable Navel
- Ear Canal Penetration
- Ovipositors
- Tentacle Magic
- Internal Tentacles
- Vomit play
